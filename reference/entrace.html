<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add backtrace from error handler — entrace • rlang</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Add backtrace from error handler — entrace" />
<meta property="og:description" content="entrace() is a low level function. See global_entrace() for a
user-friendly way of enriching errors and other conditions from
your RProfile.
entrace() is meant to be used as a global handler. It enriches
conditions with a backtrace. Errors are rethrown immediately
whereas messages and warnings are recorded into last_messages()
and last_warnings().
cnd_entrace() adds a backtrace to a condition object, without
any other effect. It should be called from a condition handler.


entrace() also works as an option(error = ) handler for
compatibility with versions of R older than 4.0.
When used as calling handler, rlang trims the handler invokation
context from the backtrace." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rlang</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.99.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../reference/lifecycle.html">Life cycle</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/02/glue-strings-and-tidy-eval/">Version 0.4.3</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/06/rlang-0-4-0/">Version 0.4.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/01/rlang-0-3-1/">Version 0.3.1</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/10/rlang-0-3-0/">Version 0.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/03/rlang-0.2.0/">Version 0.2.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/rlang/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add backtrace from error handler</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/rlang/blob/master/R/cnd-entrace.R'><code>R/cnd-entrace.R</code></a></small>
    <div class="hidden name"><code>entrace.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>entrace()</code> is a low level function. See <code><a href='global_entrace.html'>global_entrace()</a></code> for a
user-friendly way of enriching errors and other conditions from
your RProfile.</p><ul>
<li><p><code>entrace()</code> is meant to be used as a global handler. It enriches
conditions with a backtrace. Errors are rethrown immediately
whereas messages and warnings are recorded into <code><a href='last_warnings.html'>last_messages()</a></code>
and <code><a href='last_warnings.html'>last_warnings()</a></code>.</p></li>
<li><p><code>cnd_entrace()</code> adds a backtrace to a condition object, without
any other effect. It should be called from a condition handler.</p></li>
</ul>

<p><code>entrace()</code> also works as an <code>option(error = )</code> handler for
compatibility with versions of R older than 4.0.</p>
<p>When used as calling handler, rlang trims the handler invokation
context from the backtrace.</p>
    </div>

    <pre class="usage"><span class='fu'>entrace</span><span class='op'>(</span><span class='va'>cnd</span>, <span class='va'>...</span>, top <span class='op'>=</span> <span class='cn'>NULL</span>, bottom <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>cnd_entrace</span><span class='op'>(</span><span class='va'>cnd</span>, <span class='va'>...</span>, top <span class='op'>=</span> <span class='cn'>NULL</span>, bottom <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>cnd</th>
      <td><p>When <code>entrace()</code> is used as a calling handler, <code>cnd</code> is
the condition to handle.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Unused. These dots are for future extensions.</p></td>
    </tr>
    <tr>
      <th>top</th>
      <td><p>The first frame environment to be included in the
backtrace. This becomes the top of the backtrace tree and
represents the oldest call in the backtrace.</p>
<p>This is needed in particular when you call <code><a href='trace_back.html'>trace_back()</a></code>
indirectly or from a larger context, for example in tests or
inside an RMarkdown document where you don't want all of the
knitr evaluation mechanisms to appear in the backtrace.</p>
<p>If not supplied, the <code>rlang_trace_top_env</code> global option is
consulted. This makes it possible to trim the embedding context
for all backtraces created while the option is set. If knitr is
in progress, the default value for this option is
<code><a href='https://rdrr.io/pkg/knitr/man/knit_global.html'>knitr::knit_global()</a></code> so that the knitr context is trimmed out
of backtraces.</p></td>
    </tr>
    <tr>
      <th>bottom</th>
      <td><p>The last frame environment to be included in the
backtrace. This becomes the rightmost leaf of the backtrace tree
and represents the youngest call in the backtrace.</p>
<p>Set this when you would like to capture a backtrace without the
capture context.</p>
<p>Can also be an integer that will be passed to <code><a href='caller_env.html'>caller_env()</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='global_entrace.html'>global_entrace()</a></code> for configuring errors with
<code>entrace()</code>. <code><a href='with_abort.html'>with_abort()</a></code> to promote conditions to rlang
errors.  <code>cnd_entrace()</code> to manually add a backtrace to a
condition.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/substitute.html'>quote</a></span><span class='op'>(</span><span class='op'>{</span>  <span class='co'># Not run</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Set `entrace()` globally in your RProfile</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/conditions.html'>globalCallingHandlers</a></span><span class='op'>(</span>error <span class='op'>=</span> <span class='fu'>rlang</span><span class='fu'>::</span><span class='va'>entrace</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># On older R versions which don't feature `globalCallingHandlers`,</span></span>
<span class='r-in'><span class='co'># set the error handler like this:</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span>error <span class='op'>=</span> <span class='fu'>rlang</span><span class='fu'>::</span><span class='va'>entrace</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='op'>}</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> {</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     globalCallingHandlers(error = rlang::entrace)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     options(error = rlang::entrace)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> }</span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>



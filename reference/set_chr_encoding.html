<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Set encoding of a string or character vector — set_chr_encoding • rlang</title>

<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min.js" integrity="sha256-hIvIxeqhGZF+VVeM55k0mJvWpQ6gTkWk3Emc+NmowYA=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Set encoding of a string or character vector — set_chr_encoding" />

<meta property="og:description" content="R has specific support for UTF-8 and latin1 encoded strings. This
mostly matters for internal conversions. Thanks to this support,
you can reencode strings to UTF-8 or latin1 for internal
processing, and return these strings without having to convert them
back to the native encoding. However, it is important to make sure
the encoding mark has not been lost in the process, otherwise the
output will be treated as if encoded according to the current
locale (see mut_utf8_locale() for documentation about locale
codesets), which is not appropriate if it does not coincide with
the actual encoding. In those situations, you can use these
functions to ensure an encoding mark in your strings." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rlang</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../reference/lifecycle.html">Life cycle</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/10/rlang-0-3-0/">Version 0.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/03/rlang-0.2.0/">Version 0.2.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/rlang">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Set encoding of a string or character vector</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/rlang/blob/master/R/vec-chr.R'><code>R/vec-chr.R</code></a></small>
    <div class="hidden name"><code>set_chr_encoding.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>R has specific support for UTF-8 and latin1 encoded strings. This
mostly matters for internal conversions. Thanks to this support,
you can reencode strings to UTF-8 or latin1 for internal
processing, and return these strings without having to convert them
back to the native encoding. However, it is important to make sure
the encoding mark has not been lost in the process, otherwise the
output will be treated as if encoded according to the current
locale (see <code><a href='mut_utf8_locale.html'>mut_utf8_locale()</a></code> for documentation about locale
codesets), which is not appropriate if it does not coincide with
the actual encoding. In those situations, you can use these
functions to ensure an encoding mark in your strings.</p>
    
    </div>

    <pre class="usage"><span class='fu'>set_chr_encoding</span>(<span class='no'>x</span>, <span class='kw'>encoding</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"unknown"</span>, <span class='st'>"UTF-8"</span>, <span class='st'>"latin1"</span>, <span class='st'>"bytes"</span>))

<span class='fu'>chr_encoding</span>(<span class='no'>x</span>)

<span class='fu'>set_str_encoding</span>(<span class='no'>x</span>, <span class='kw'>encoding</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"unknown"</span>, <span class='st'>"UTF-8"</span>, <span class='st'>"latin1"</span>, <span class='st'>"bytes"</span>))

<span class='fu'>str_encoding</span>(<span class='no'>x</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A string or character vector.</p></td>
    </tr>
    <tr>
      <th>encoding</th>
      <td><p>Either an encoding specially handled by R
(<code>"UTF-8"</code> or <code>"latin1"</code>), <code>"bytes"</code> to inhibit all encoding
conversions, or <code>"unknown"</code> if the string should be treated as
encoded in the current locale codeset.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="life-cycle"><a class="anchor" href="#life-cycle"></a>Life cycle</h2>

    
    <p>These functions are experimental. They might be removed in the
future because they don't bring anything new over the base API.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='mut_utf8_locale.html'>mut_utf8_locale()</a></code> about the effects of the locale, and
<code><a href='as_utf8_character.html'>as_utf8_string()</a></code> about encoding conversion.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Encoding marks are always ignored on ASCII strings:</span>
<span class='fu'>str_encoding</span>(<span class='fu'>set_str_encoding</span>(<span class='st'>"cafe"</span>, <span class='st'>"UTF-8"</span>))</div><div class='output co'>#&gt; [1] "unknown"</div><div class='input'>
<span class='co'># You can specify the encoding of strings containing non-ASCII</span>
<span class='co'># characters:</span>
<span class='no'>cafe</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='string.html'>string</a></span>(<span class='fu'>c</span>(<span class='fl'>0x63</span>, <span class='fl'>0x61</span>, <span class='fl'>0x66</span>, <span class='fl'>0xC3</span>, <span class='fl'>0xE9</span>))
<span class='fu'>str_encoding</span>(<span class='no'>cafe</span>)</div><div class='output co'>#&gt; [1] "unknown"</div><div class='input'><span class='fu'>str_encoding</span>(<span class='fu'>set_str_encoding</span>(<span class='no'>cafe</span>, <span class='st'>"UTF-8"</span>))</div><div class='output co'>#&gt; [1] "UTF-8"</div><div class='input'>

<span class='co'># It is important to consistently mark the encoding of strings</span>
<span class='co'># because R and other packages perform internal string conversions</span>
<span class='co'># all the time. Here is an example with the names attribute:</span>
<span class='no'>latin1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='string.html'>string</a></span>(<span class='fu'>c</span>(<span class='fl'>0x63</span>, <span class='fl'>0x61</span>, <span class='fl'>0x66</span>, <span class='fl'>0xE9</span>), <span class='st'>"latin1"</span>)
<span class='no'>latin1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='set_names.html'>set_names</a></span>(<span class='no'>latin1</span>)

<span class='co'># The names attribute is encoded in latin1 as we would expect:</span>
<span class='fu'>str_encoding</span>(<span class='fu'>names</span>(<span class='no'>latin1</span>))</div><div class='output co'>#&gt; [1] "latin1"</div><div class='input'>
<span class='co'># However the names are converted to UTF-8 by the c() function:</span>
<span class='fu'>str_encoding</span>(<span class='fu'>names</span>(<span class='fu'>c</span>(<span class='no'>latin1</span>)))</div><div class='output co'>#&gt; [1] "latin1"</div><div class='input'><span class='fu'><a href='as_bytes.html'>as_bytes</a></span>(<span class='fu'>names</span>(<span class='fu'>c</span>(<span class='no'>latin1</span>)))</div><div class='output co'>#&gt; [1] 63 61 66 e9</div><div class='input'>
# Bad things happen when the encoding marker is lost and R performs
# a conversion. R will assume that the string is encoded according
# to the current locale:
</div><span class='co'># NOT RUN {</span>
<span class='no'>bad</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='set_names.html'>set_names</a></span>(<span class='fu'>set_str_encoding</span>(<span class='no'>latin1</span>, <span class='st'>"unknown"</span>))
<span class='fu'><a href='mut_utf8_locale.html'>mut_utf8_locale</a></span>()

<span class='fu'>str_encoding</span>(<span class='fu'>names</span>(<span class='fu'>c</span>(<span class='no'>bad</span>)))
<span class='fu'><a href='as_bytes.html'>as_bytes</a></span>(<span class='fu'>names</span>(<span class='fu'>c</span>(<span class='no'>bad</span>)))
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#life-cycle">Life cycle</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>


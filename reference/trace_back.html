<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="A backtrace captures the sequence of calls that lead to the current
function (sometimes called the call stack). Because of lazy
evaluation, the call stack in R is actually a tree, which the
print() method for this object will reveal.
Users rarely need to call trace_back() manually. Instead,
signalling an error with abort() or setting up global_entrace()
is the most common way to create backtraces when an error is
thrown. Inspect the backtrace created for the most recent error
with last_error().
trace_length() returns the number of frames in a backtrace."><title>Capture a backtrace — trace_back • rlang</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Source%20Sans%20Pro-0.4.0/font.css" rel="stylesheet"><link href="../deps/_Source%20Code%20Pro-0.4.0/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Capture a backtrace — trace_back"><meta property="og:description" content="A backtrace captures the sequence of calls that lead to the current
function (sometimes called the call stack). Because of lazy
evaluation, the call stack in R is actually a tree, which the
print() method for this object will reveal.
Users rarely need to call trace_back() manually. Instead,
signalling an error with abort() or setting up global_entrace()
is the most common way to create backtraces when an error is
thrown. Inspect the backtrace created for the most recent error
with last_error().
trace_length() returns the number of frames in a backtrace."><meta property="og:image" content="https://rlang.r-lib.org/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rlang</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tidy-evaluation">Tidy evaluation</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tidy-evaluation">
    <h6 class="dropdown-header" data-toc-skip>Overviews</h6>
    <a class="dropdown-item" href="../reference/topic-data-mask.html">What is data-masking and why do I need `{{`?</a>
    <a class="dropdown-item" href="../reference/topic-data-mask-programming.html">Data mask programming patterns</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Guides</h6>
    <a class="dropdown-item" href="../reference/topic-data-mask-ambiguity.html">The data mask ambiguity</a>
    <a class="dropdown-item" href="../reference/topic-double-evaluation.html">The double evaluation problem</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Notes</h6>
    <a class="dropdown-item" href="../reference/topic-inject-out-of-context.html">What happens if I use injection operators out of context?</a>
    <a class="dropdown-item" href="../reference/topic-embrace-non-args.html">Does `{{` work on regular objects?</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-metaprogramming">Metaprogramming</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-metaprogramming">
    <h6 class="dropdown-header" data-toc-skip>Overviews</h6>
    <a class="dropdown-item" href="../reference/topic-defuse.html">Defusing R expressions</a>
    <a class="dropdown-item" href="../reference/topic-inject.html">Injecting with `!!`, `!!!`, and glue syntax</a>
    <a class="dropdown-item" href="../reference/topic-metaprogramming.html">Metaprogramming patterns</a>
    <a class="dropdown-item" href="../reference/topic-quosure.html">What are quosures and when are they needed?</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Guides</h6>
    <a class="dropdown-item" href="../reference/topic-multiple-columns.html">Taking multiple columns without `...`</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Notes</h6>
    <a class="dropdown-item" href="../reference/topic-embrace-constants.html">Why are strings and other constants enquosed in the empty environment?</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-conditions">Conditions</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-conditions">
    <h6 class="dropdown-header" data-toc-skip>Notes</h6>
    <a class="dropdown-item" href="../reference/topic-condition-customisation.html">Customising condition messages</a>
    <a class="dropdown-item" href="../reference/topic-condition-formatting.html">Formatting condition messages</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Release notes</h6>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/02/glue-strings-and-tidy-eval/">Version 0.4.3</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/06/rlang-0-4-0/">Version 0.4.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/01/rlang-0-3-1/">Version 0.3.1</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/10/rlang-0-3-0/">Version 0.3.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/03/rlang-0.2.0/">Version 0.2.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-lib/rlang/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Capture a backtrace</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/rlang/blob/HEAD/R/trace.R" class="external-link"><code>R/trace.R</code></a></small>
      <div class="d-none name"><code>trace_back.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A backtrace captures the sequence of calls that lead to the current
function (sometimes called the call stack). Because of lazy
evaluation, the call stack in R is actually a tree, which the
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method for this object will reveal.</p>
<p>Users rarely need to call <code>trace_back()</code> manually. Instead,
signalling an error with <code><a href="abort.html">abort()</a></code> or setting up <code><a href="global_entrace.html">global_entrace()</a></code>
is the most common way to create backtraces when an error is
thrown. Inspect the backtrace created for the most recent error
with <code><a href="last_error.html">last_error()</a></code>.</p>
<p><code>trace_length()</code> returns the number of frames in a backtrace.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">trace_back</span><span class="op">(</span>top <span class="op">=</span> <span class="cn">NULL</span>, bottom <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>

<span class="fu">trace_length</span><span class="op">(</span><span class="va">trace</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>top</dt>
<dd><p>The first frame environment to be included in the
backtrace. This becomes the top of the backtrace tree and
represents the oldest call in the backtrace.</p>
<p>This is needed in particular when you call <code>trace_back()</code>
indirectly or from a larger context, for example in tests or
inside an RMarkdown document where you don't want all of the
knitr evaluation mechanisms to appear in the backtrace.</p>
<p>If not supplied, the <code>rlang_trace_top_env</code> global option is
consulted. This makes it possible to trim the embedding context
for all backtraces created while the option is set. If knitr is
in progress, the default value for this option is
<code><a href="https://rdrr.io/pkg/knitr/man/knit_global.html" class="external-link">knitr::knit_global()</a></code> so that the knitr context is trimmed out
of backtraces.</p></dd>
<dt>bottom</dt>
<dd><p>The last frame environment to be included in the
backtrace. This becomes the rightmost leaf of the backtrace tree
and represents the youngest call in the backtrace.</p>
<p>Set this when you would like to capture a backtrace without the
capture context.</p>
<p>Can also be an integer that will be passed to <code><a href="stack.html">caller_env()</a></code>.</p></dd>
<dt>trace</dt>
<dd><p>A backtrace created by <code>trace_back()</code>.</p></dd>
</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Trim backtraces automatically (this improves the generated</span></span>
<span class="r-in"><span class="co"># documentation for the rlang website and the same trick can be</span></span>
<span class="r-in"><span class="co"># useful within knitr documents):</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>rlang_trace_top_env <span class="op">=</span> <span class="fu"><a href="stack.html">current_env</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu">g</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="va">g</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu">h</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="va">h</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu">trace_back</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># When no lazy evaluation is involved the backtrace is linear</span></span>
<span class="r-in"><span class="co"># (i.e. every call has only one child)</span></span>
<span class="r-in"><span class="fu">f</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">    </span>▆</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 1. </span>└─f()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 2. </span>  └─g()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 3. </span>    └─h()</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Lazy evaluation introduces a tree like structure</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/identity.html" class="external-link">identity</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identity.html" class="external-link">identity</a></span><span class="op">(</span><span class="fu">f</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">    </span>▆</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 1. </span>├─<span style="font-weight: bold;">base</span>::identity(identity(f()))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 2. </span>├─base::identity(f())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 3. </span>└─f()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 4. </span>  └─g()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 5. </span>    └─h()</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/identity.html" class="external-link">identity</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">f</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">    </span>▆</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 1. </span>├─<span style="font-weight: bold;">base</span>::identity(try(f()))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 2. </span>├─base::try(f())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 3. </span>│ └─base::tryCatch(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 4. </span>│   └─base tryCatchList(expr, classes, parentenv, handlers)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 5. </span>│     └─base tryCatchOne(expr, names, parentenv, handlers[[1L]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 6. </span>│       └─base doTryCatch(return(expr), name, parentenv, handler)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 7. </span>└─f()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 8. </span>  └─g()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 9. </span>    └─h()</span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identity.html" class="external-link">identity</a></span><span class="op">(</span><span class="fu">f</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">    </span>▆</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 1. </span>├─<span style="font-weight: bold;">base</span>::try(identity(f()))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 2. </span>│ └─base::tryCatch(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 3. </span>│   └─base tryCatchList(expr, classes, parentenv, handlers)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 4. </span>│     └─base tryCatchOne(expr, names, parentenv, handlers[[1L]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 5. </span>│       └─base doTryCatch(return(expr), name, parentenv, handler)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 6. </span>├─base::identity(f())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 7. </span>└─f()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 8. </span>  └─g()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 9. </span>    └─h()</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># When printing, you can request to simplify this tree to only show</span></span>
<span class="r-in"><span class="co"># the direct sequence of calls that lead to `trace_back()`</span></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identity.html" class="external-link">identity</a></span><span class="op">(</span><span class="fu">f</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">x</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">    </span>▆</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 1. </span>├─<span style="font-weight: bold;">base</span>::try(identity(f()))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 2. </span>│ └─base::tryCatch(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 3. </span>│   └─base tryCatchList(expr, classes, parentenv, handlers)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 4. </span>│     └─base tryCatchOne(expr, names, parentenv, handlers[[1L]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 5. </span>│       └─base doTryCatch(return(expr), name, parentenv, handler)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 6. </span>├─base::identity(f())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 7. </span>└─f()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 8. </span>  └─g()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 9. </span>    └─h()</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, simplify <span class="op">=</span> <span class="st">"branch"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 1. </span><span style="font-weight: bold;">base</span>::try(identity(f()))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 7. </span>f()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 8. </span>g()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 9. </span>h()</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># With a little cunning you can also use it to capture the</span></span>
<span class="r-in"><span class="co"># tree from within a base NSE function</span></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="op">{</span><span class="va">x</span> <span class="op">&lt;&lt;-</span> <span class="fu">f</span><span class="op">(</span><span class="op">)</span>; <span class="fl">10</span><span class="op">}</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10</span>
<span class="r-in"><span class="va">x</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">    </span>▆</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 1. </span>├─<span style="font-weight: bold;">base</span>::with(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 2. </span>└─base::with.default(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 3. </span>  └─base::eval(substitute(expr), data, enclos = parent.frame())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 4. </span>    └─base::eval(substitute(expr), data, enclos = parent.frame())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 5. </span>      └─f()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 6. </span>        └─g()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 7. </span>          └─h()</span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Restore default top env for next example</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>rlang_trace_top_env <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># When code is executed indirectly, i.e. via source or within an</span></span>
<span class="r-in"><span class="co"># RMarkdown document, you'll tend to get a lot of guff at the beginning</span></span>
<span class="r-in"><span class="co"># related to the execution environment:</span></span>
<span class="r-in"><span class="va">conn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/textconnections.html" class="external-link">textConnection</a></span><span class="op">(</span><span class="st">"summary(f())"</span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="va">conn</span>, echo <span class="op">=</span> <span class="cn">TRUE</span>, local <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; summary(f())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">     </span>▆</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">  1. </span>└─<span style="font-weight: bold;">pkgdown</span>::build_site_github_pages(new_process = FALSE, install = FALSE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">  2. </span>  └─pkgdown::build_site(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">  3. </span>    └─pkgdown:::build_site_local(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">  4. </span>      └─pkgdown::build_reference(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">  5. </span>        └─<span style="font-weight: bold;">purrr</span>::map(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">  6. </span>          └─<span style="font-weight: bold;">pkgdown</span> .f(.x[[i]], ...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">  7. </span>            ├─<span style="font-weight: bold;">base</span>::withCallingHandlers(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">  8. </span>            └─<span style="font-weight: bold;">pkgdown</span>:::data_reference_topic(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">  9. </span>              └─pkgdown:::run_examples(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 10. </span>                └─pkgdown:::highlight_examples(code, topic, env = env)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 11. </span>                  └─<span style="font-weight: bold;">downlit</span>::evaluate_and_highlight(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 12. </span>                    └─<span style="font-weight: bold;">evaluate</span>::evaluate(code, child_env(env), new_device = TRUE, output_handler = output_handler)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 13. </span>                      └─evaluate:::evaluate_call(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 14. </span>                        ├─evaluate timing_fn(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 15. </span>                        ├─evaluate handle(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 16. </span>                        │ └─<span style="font-weight: bold;">base</span>::try(f, silent = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 17. </span>                        │   └─base::tryCatch(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 18. </span>                        │     └─base tryCatchList(expr, classes, parentenv, handlers)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 19. </span>                        │       └─base tryCatchOne(expr, names, parentenv, handlers[[1L]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 20. </span>                        │         └─base doTryCatch(return(expr), name, parentenv, handler)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 21. </span>                        ├─base::withCallingHandlers(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 22. </span>                        ├─base::withVisible(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 23. </span>                        └─<span style="font-weight: bold;">evaluate</span>:::eval_with_user_handlers(expr, envir, enclos, user_handlers)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 24. </span>                          └─<span style="font-weight: bold;">base</span>::eval(expr, envir, enclos)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 25. </span>                            └─base::eval(expr, envir, enclos)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 26. </span>                              ├─base::source(conn, echo = TRUE, local = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 27. </span>                              │ ├─base::withVisible(eval(ei, envir))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 28. </span>                              │ └─base::eval(ei, envir)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 29. </span>                              │   └─base::eval(ei, envir)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 30. </span>                              ├─base::summary(f())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 31. </span>                              └─f()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 32. </span>                                └─g()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 33. </span>                                  └─h()</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">conn</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># To automatically strip this off, specify which frame should be</span></span>
<span class="r-in"><span class="co"># the top of the backtrace. This will automatically trim off calls</span></span>
<span class="r-in"><span class="co"># prior to that frame:</span></span>
<span class="r-in"><span class="va">top</span> <span class="op">&lt;-</span> <span class="fu"><a href="stack.html">current_env</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="va">h</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu">trace_back</span><span class="op">(</span><span class="va">top</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">conn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/textconnections.html" class="external-link">textConnection</a></span><span class="op">(</span><span class="st">"summary(f())"</span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="va">conn</span>, echo <span class="op">=</span> <span class="cn">TRUE</span>, local <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; summary(f())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">    </span>▆</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 1. </span>├─<span style="font-weight: bold;">base</span>::summary(f())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 2. </span>└─f()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 3. </span>  └─g()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> 4. </span>    └─h()</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">conn</span><span class="op">)</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="http://hadley.nz" class="external-link">Hadley Wickham</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

  </div></footer></body></html>


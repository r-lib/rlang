<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Coerce an object to a base type — vector-coercion • rlang</title>

<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min.js" integrity="sha256-hIvIxeqhGZF+VVeM55k0mJvWpQ6gTkWk3Emc+NmowYA=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Coerce an object to a base type — vector-coercion" />

<meta property="og:description" content="
These are equivalent to the base functions (e.g. as.logical(),
as.list(), etc), but perform coercion rather than conversion.
This means they are not generic and will not call S3 conversion
methods. They only attempt to coerce the base type of their
input. In addition, they have stricter implicit coercion rules and
will never attempt any kind of parsing. E.g. they will not try to
figure out if a character vector represents integers or booleans.
Finally, they treat attributes consistently, unlike the base R
functions: all attributes except names are removed." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rlang</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../reference/lifecycle.html">Life cycle</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/10/rlang-0-3-0/">Version 0.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/03/rlang-0.2.0/">Version 0.2.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/rlang">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Coerce an object to a base type</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/rlang/blob/master/R/vec-coerce.R'><code>R/vec-coerce.R</code></a></small>
    <div class="hidden name"><code>vector-coercion.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><a href='https://www.tidyverse.org/lifecycle/#questioning'><img src='figures/lifecycle-questioning.svg' alt='Questioning lifecycle'></a></p>
<p>These are equivalent to the base functions (e.g. <code>as.logical()</code>,
<code>as.list()</code>, etc), but perform coercion rather than conversion.
This means they are not generic and will not call S3 conversion
methods. They only attempt to coerce the base type of their
input. In addition, they have stricter implicit coercion rules and
will never attempt any kind of parsing. E.g. they will not try to
figure out if a character vector represents integers or booleans.
Finally, they treat attributes consistently, unlike the base R
functions: all attributes except names are removed.</p>
    
    </div>

    <pre class="usage"><span class='fu'>as_logical</span>(<span class='no'>x</span>)

<span class='fu'>as_integer</span>(<span class='no'>x</span>)

<span class='fu'>as_double</span>(<span class='no'>x</span>)

<span class='fu'>as_complex</span>(<span class='no'>x</span>)

<span class='fu'>as_character</span>(<span class='no'>x</span>, <span class='kw'>encoding</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>as_string</span>(<span class='no'>x</span>, <span class='kw'>encoding</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>as_list</span>(<span class='no'>x</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>An object to coerce to a base type.</p></td>
    </tr>
    <tr>
      <th>encoding</th>
      <td><p>If non-null, passed to <code><a href='set_chr_encoding.html'>set_chr_encoding()</a></code> to add
an encoding mark. This is only declarative, no encoding
conversion is performed.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="coercion-to-logical-and-numeric-atomic-vectors"><a class="anchor" href="#coercion-to-logical-and-numeric-atomic-vectors"></a>Coercion to logical and numeric atomic vectors</h2>

    
    <ul>
<li><p>To logical vectors: Integer and integerish double vectors. See
<code><a href='is_integerish.html'>is_integerish()</a></code>.</p></li>
<li><p>To integer vectors: Logical and integerish double vectors.</p></li>
<li><p>To double vectors: Logical and integer vectors.</p></li>
<li><p>To complex vectors: Logical, integer and double vectors.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="coercion-to-character-vectors"><a class="anchor" href="#coercion-to-character-vectors"></a>Coercion to character vectors</h2>

    
    <p><code>as_character()</code> and <code>as_string()</code> have an optional <code>encoding</code>
argument to specify the encoding. R uses this information for
internal handling of strings and character vectors. Note that this
is only declarative, no encoding conversion is attempted. See
<code><a href='as_utf8_character.html'>as_utf8_character()</a></code> and <code><a href='as_utf8_character.html'>as_native_character()</a></code> for coercing to a
character vector and attempt encoding conversion.</p>
<p>See also <code><a href='set_chr_encoding.html'>set_chr_encoding()</a></code> and <code><a href='mut_utf8_locale.html'>mut_utf8_locale()</a></code> for
information about encodings and locales in R, and <code><a href='string.html'>string()</a></code> and
<code><a href='vector-construction.html'>chr()</a></code> for other ways of creating strings and character vectors.</p>
<p>Note that only <code>as_string()</code> can coerce symbols to a scalar
character vector. This makes the code more explicit and adds an
extra type check.</p>
    
    <h2 class="hasAnchor" id="coercion-to-lists"><a class="anchor" href="#coercion-to-lists"></a>Coercion to lists</h2>

    
    <p><code>as_list()</code> only coerces vector and dictionary types (environments
are an example of dictionary type). Unlike <code><a href='http://www.rdocumentation.org/packages/base/topics/list'>base::as.list()</a></code>,
<code>as_list()</code> removes all attributes except names.</p>
    
    <h2 class="hasAnchor" id="effects-of-removing-attributes"><a class="anchor" href="#effects-of-removing-attributes"></a>Effects of removing attributes</h2>

    
    <p>A technical side-effect of removing the attributes of the input is
that the underlying objects has to be copied. This has no
performance implications in the case of lists because this is a
shallow copy: only the list structure is copied, not the contents
(see <code><a href='duplicate.html'>duplicate()</a></code>). However, be aware that atomic vectors
containing large amounts of data will have to be copied.</p>
<p>In general, any attribute modification creates a copy, which is why
it is better to avoid using attributes with heavy atomic vectors.
Uncopyable objects like environments and symbols are an exception
to this rule: in this case, attributes modification happens in
place and has side-effects.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Coercing atomic vectors removes attributes with both base R and rlang:</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>structure</span>(<span class='fl'>TRUE</span>, <span class='kw'>class</span> <span class='kw'>=</span> <span class='st'>"foo"</span>, <span class='kw'>bar</span> <span class='kw'>=</span> <span class='st'>"baz"</span>)
<span class='fu'>as.logical</span>(<span class='no'>x</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># But coercing lists preserves attributes in base R but not rlang:</span>
<span class='no'>l</span> <span class='kw'>&lt;-</span> <span class='fu'>structure</span>(<span class='fu'>list</span>(<span class='fl'>TRUE</span>), <span class='kw'>class</span> <span class='kw'>=</span> <span class='st'>"foo"</span>, <span class='kw'>bar</span> <span class='kw'>=</span> <span class='st'>"baz"</span>)
<span class='fu'>as.list</span>(<span class='no'>l</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] TRUE
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "foo"
#&gt; attr(,"bar")
#&gt; [1] "baz"</div><div class='input'><span class='fu'>as_list</span>(<span class='no'>l</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] TRUE
#&gt; </div><div class='input'>
<span class='co'># Implicit conversions are performed in base R but not rlang:</span>
<span class='fu'>as.logical</span>(<span class='no'>l</span>)</div><div class='output co'>#&gt; [1] TRUE</div><span class='co'># NOT RUN {</span>
<span class='fu'>as_logical</span>(<span class='no'>l</span>)
<span class='co'># }</span><div class='input'>
<span class='co'># Conversion methods are bypassed, making the result of the</span>
<span class='co'># coercion more predictable:</span>
<span class='no'>as.list.foo</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='st'>"wrong"</span>
<span class='fu'>as.list</span>(<span class='no'>l</span>)</div><div class='output co'>#&gt; [1] "wrong"</div><div class='input'><span class='fu'>as_list</span>(<span class='no'>l</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] TRUE
#&gt; </div><div class='input'>
<span class='co'># The input is never parsed. E.g. character vectors of numbers are</span>
<span class='co'># not converted to numeric types:</span>
<span class='fu'>as.integer</span>(<span class='st'>"33"</span>)</div><div class='output co'>#&gt; [1] 33</div><span class='co'># NOT RUN {</span>
<span class='fu'>as_integer</span>(<span class='st'>"33"</span>)
<span class='co'># }</span><div class='input'>

<span class='co'># With base R tools there is no way to convert an environment to a</span>
<span class='co'># list without either triggering method dispatch, or changing the</span>
<span class='co'># original environment. as_list() makes it easy:</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>structure</span>(<span class='fu'><a href='as_environment.html'>as_environment</a></span>(<span class='no'>mtcars</span>[<span class='fl'>1</span>:<span class='fl'>2</span>]), <span class='kw'>class</span> <span class='kw'>=</span> <span class='st'>"foobar"</span>)
<span class='no'>as.list.foobar</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'><a href='abort.html'>abort</a></span>(<span class='st'>"dont call me"</span>)
<span class='fu'>as_list</span>(<span class='no'>x</span>)</div><div class='output co'>#&gt; $cyl
#&gt;  [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4
#&gt; 
#&gt; $mpg
#&gt;  [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4
#&gt; [16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7
#&gt; [31] 15.0 21.4
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#coercion-to-logical-and-numeric-atomic-vectors">Coercion to logical and numeric atomic vectors</a></li>

      <li><a href="#coercion-to-character-vectors">Coercion to character vectors</a></li>

      <li><a href="#coercion-to-lists">Coercion to lists</a></li>

      <li><a href="#effects-of-removing-attributes">Effects of removing attributes</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>


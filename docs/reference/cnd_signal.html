<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Signal a condition — cnd_signal • rlang</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- tidyverse -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">rlang</a>
        <small class="tidyverse">part of the <a href="http://tidyverse.org">tidyverse</a></small>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/tidy-evaluation.html">Tidy evaluation</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Signal a condition</h1>
    </div>

    
    <p>Signal a condition to handlers that have been established on the
stack. Conditions signalled with <code>cnd_signal()</code> are assumed to be
benign. Control flow can resume normally once the conditions has
been signalled (if no handler jumped somewhere else on the
evaluation stack). On the other hand, <code>cnd_abort()</code> treats the
condition as critical and will jump out of the distressed call
frame (see <code><a href='rst_abort.html'>rst_abort()</a></code>), unless a handler can deal with the
condition.</p>
    

    <pre class="usage"><span class='fu'>cnd_signal</span>(<span class='no'>.cnd</span>, <span class='no'>...</span>, <span class='kw'>.msg</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>.call</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>.mufflable</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>cnd_abort</span>(<span class='no'>.cnd</span>, <span class='no'>...</span>, <span class='kw'>.msg</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>.call</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>.mufflable</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.cnd</th>
      <td><p>Either a condition object (see <code><a href='new_cnd.html'>new_cnd()</a></code>), or the
name of a s3 class from which a new condition will be created.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Named data fields stored inside the condition
object. These dots are evaluated with <a href='dots_list.html'>explicit
splicing</a>.</p></td>
    </tr>
    <tr>
      <th>.msg</th>
      <td><p>A string to override the condition's default message.</p></td>
    </tr>
    <tr>
      <th>.call</th>
      <td><p>Whether to display the call of the frame in which the
condition is signalled. If <code>TRUE</code>, the call is stored in the
<code>call</code> field of the condition object: this field is displayed by
R when an error is issued. The call information is also stored in
the <code>.call</code> field in all cases.</p></td>
    </tr>
    <tr>
      <th>.mufflable</th>
      <td><p>Whether to signal the condition with a muffling
restart. This is useful to let <code><a href='exiting.html'>inplace()</a></code> handlers muffle a
condition. It stops the condition from being passed to other
handlers when the inplace handler did not jump elsewhere. <code>TRUE</code>
by default for benign conditions, but <code>FALSE</code> for critical ones,
since in those cases execution should probably not be allowed to
continue normally.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If <code>.critical</code> is <code>FALSE</code>, this function has no side effects beyond
calling handlers. In particular, execution will continue normally
after signalling the condition (unless a handler jumped somewhere
else via <code><a href='rst_list.html'>rst_jump()</a></code> or by being <code><a href='exiting.html'>exiting()</a></code>). If <code>.critical</code> is
<code>TRUE</code>, the condition is signalled via <code><a href='http://www.rdocumentation.org/packages/base/topics/stop'>base::stop()</a></code> and the
program will terminate if no handler dealt with the condition by
jumping out of the distressed call frame.
    <code><a href='exiting.html'>inplace()</a></code> handlers are called in turn when they decline to handle
the condition by returning normally. However, it is sometimes
useful for an inplace handler to produce a side effect (signalling
another condition, displaying a message, logging something, etc),
prevent the condition from being passed to other handlers, and
resume execution from the place where the condition was
signalled. The easiest way to accomplish this is by jumping to a
restart point (see <code><a href='with_restarts.html'>with_restarts()</a></code>) established by the signalling
function. If <code>.mufflable</code> is <code>TRUE</code>, a muffle restart is
established. This allows inplace handler to muffle a signalled
condition. See <code><a href='rst_muffle.html'>rst_muffle()</a></code> to jump to a muffling restart, and
the <code>muffle</code> argument of <code><a href='exiting.html'>inplace()</a></code> for creating a muffling
handler.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='abort.html'>abort()</a></code>, <code><a href='abort.html'>warn()</a></code> and <code><a href='abort.html'>inform()</a></code> for signalling typical
R conditions. See <code><a href='with_handlers.html'>with_handlers()</a></code> for establishing condition
handlers.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Creating a condition of type "foo"</span>
<span class='no'>cnd</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='new_cnd.html'>new_cnd</a></span>(<span class='st'>"foo"</span>)

<span class='co'># If no handler capable of dealing with "foo" is established on the</span>
<span class='co'># stack, signalling the condition has no effect:</span>
<span class='fu'>cnd_signal</span>(<span class='no'>cnd</span>)</div><div class='output co'>#&gt; NULL</div><div class='input'>
<span class='co'># To learn more about establishing condition handlers, see</span>
<span class='co'># documentation for with_handlers(), exiting() and inplace():</span>
<span class='fu'><a href='with_handlers.html'>with_handlers</a></span>(<span class='fu'>cnd_signal</span>(<span class='no'>cnd</span>),
  <span class='kw'>foo</span> <span class='kw'>=</span> <span class='fu'><a href='exiting.html'>inplace</a></span>(<span class='kw'>function</span>(<span class='no'>c</span>) <span class='fu'>cat</span>(<span class='st'>"side effect!\n"</span>))
)</div><div class='output co'>#&gt; side effect!</div><div class='output co'>#&gt; NULL</div><div class='input'>

<span class='co'># By default, cnd_signal() creates a muffling restart which allows</span>
<span class='co'># inplace handlers to prevent a condition from being passed on to</span>
<span class='co'># other handlers and to resume execution:</span>
<span class='no'>undesirable_handler</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='exiting.html'>inplace</a></span>(<span class='kw'>function</span>(<span class='no'>c</span>) <span class='fu'>cat</span>(<span class='st'>"please don't call me\n"</span>))
<span class='no'>muffling_handler</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='exiting.html'>inplace</a></span>(<span class='kw'>function</span>(<span class='no'>c</span>) {
  <span class='fu'>cat</span>(<span class='st'>"muffling foo...\n"</span>)
  <span class='fu'><a href='rst_muffle.html'>rst_muffle</a></span>(<span class='no'>c</span>)
})

<span class='fu'><a href='with_handlers.html'>with_handlers</a></span>(<span class='kw'>foo</span> <span class='kw'>=</span> <span class='no'>undesirable_handler</span>,
  <span class='fu'><a href='with_handlers.html'>with_handlers</a></span>(<span class='kw'>foo</span> <span class='kw'>=</span> <span class='no'>muffling_handler</span>, {
    <span class='fu'>cnd_signal</span>(<span class='st'>"foo"</span>)
    <span class='st'>"return value"</span>
  }))</div><div class='output co'>#&gt; muffling foo...</div><div class='output co'>#&gt; [1] "return value"</div><div class='input'>

<span class='co'># You can signal a critical condition with cnd_abort(). Unlike</span>
<span class='co'># cnd_signal() which has no side effect besides signalling the</span>
<span class='co'># condition, cnd_abort() makes the program terminate with an error</span>
<span class='co'># unless a handler can deal with the condition:</span>
<span class='fu'>not_run</span>({
  <span class='fu'>cnd_abort</span>(<span class='no'>cnd</span>)
})

<span class='co'># If you don't specify a .msg or .call, the default message/call</span>
<span class='co'># (supplied to new_cnd()) are displayed. Otherwise, the ones</span>
<span class='co'># supplied to cnd_abort() and cnd_signal() take precedence:</span>
<span class='fu'>not_run</span>({
  <span class='no'>critical</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='new_cnd.html'>new_cnd</a></span>(<span class='st'>"my_error"</span>,
    <span class='kw'>.msg</span> <span class='kw'>=</span> <span class='st'>"default 'my_error' msg"</span>,
    <span class='kw'>.call</span> <span class='kw'>=</span> <span class='fu'>quote</span>(<span class='fu'>default</span>(<span class='no'>call</span>))
  )
  <span class='fu'>cnd_abort</span>(<span class='no'>critical</span>)
  <span class='fu'>cnd_abort</span>(<span class='no'>critical</span>, <span class='kw'>.msg</span> <span class='kw'>=</span> <span class='st'>"overridden msg"</span>)

  <span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>...</span>) {
    <span class='fu'>cnd_abort</span>(<span class='no'>critical</span>, <span class='kw'>.call</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
  }
  <span class='fu'>fn</span>(<span class='kw'>arg</span> <span class='kw'>=</span> <span class='fu'>foo</span>(<span class='no'>bar</span>))
})

<span class='co'># Note that by default a condition signalled with cnd_abort() does</span>
<span class='co'># not have a muffle restart. That is because in most cases,</span>
<span class='co'># execution should not continue after signalling a critical</span>
<span class='co'># condition.</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="tidyverse">
  <p>rlang is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="http://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
  <p>Site built by <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67989-18', 'auto');
  ga('send', 'pageview');
</script>
      </footer>
   </div>

  </body>
</html>
